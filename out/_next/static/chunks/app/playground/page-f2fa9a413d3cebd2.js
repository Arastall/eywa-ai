(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[383],{39700:function(e,t,s){Promise.resolve().then(s.bind(s,22392))},81066:function(e,t,s){"use strict";s.d(t,{Z:function(){return c}});var n=s(2265),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),c=(e,t)=>{let s=(0,n.forwardRef)((s,c)=>{let{color:i="currentColor",size:o=24,strokeWidth:l=2,absoluteStrokeWidth:d,className:u="",children:m,...h}=s;return(0,n.createElement)("svg",{ref:c,...r,width:o,height:o,stroke:i,strokeWidth:d?24*Number(l)/Number(o):l,className:["lucide","lucide-".concat(a(e)),u].join(" "),...h},[...t.map(e=>{let[t,s]=e;return(0,n.createElement)(t,s)}),...Array.isArray(m)?m:[m]])});return s.displayName="".concat(e),s}},95137:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s(81066).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},22468:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s(81066).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},40933:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s(81066).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},74109:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s(81066).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},98094:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s(81066).Z)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]])},16463:function(e,t,s){"use strict";var n=s(71169);s.o(n,"useRouter")&&s.d(t,{useRouter:function(){return n.useRouter}})},20357:function(e,t,s){"use strict";var n,r;e.exports=(null==(n=s.g.process)?void 0:n.env)&&"object"==typeof(null==(r=s.g.process)?void 0:r.env)?s.g.process:s(88081)},88081:function(e){!function(){var t={229:function(e){var t,s,n,r=e.exports={};function a(){throw Error("setTimeout has not been defined")}function c(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(s){try{return t.call(null,e,0)}catch(s){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{s="function"==typeof clearTimeout?clearTimeout:c}catch(e){s=c}}();var o=[],l=!1,d=-1;function u(){l&&n&&(l=!1,n.length?o=n.concat(o):d=-1,o.length&&m())}function m(){if(!l){var e=i(u);l=!0;for(var t=o.length;t;){for(n=o,o=[];++d<t;)n&&n[d].run();d=-1,t=o.length}n=null,l=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===c||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function x(){}r.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];o.push(new h(e,t)),1!==o.length||l||i(m)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=x,r.addListener=x,r.once=x,r.off=x,r.removeListener=x,r.removeAllListeners=x,r.emit=x,r.prependListener=x,r.prependOnceListener=x,r.listeners=function(e){return[]},r.binding=function(e){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw Error("process.chdir is not supported")},r.umask=function(){return 0}}},s={};function n(e){var r=s[e];if(void 0!==r)return r.exports;var a=s[e]={exports:{}},c=!0;try{t[e](a,a.exports,n),c=!1}finally{c&&delete s[e]}return a.exports}n.ab="//";var r=n(229);e.exports=r}()},22392:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var n=s(57437),r=s(2265),a=s(16463),c=s(87138),i=s(92800),o=s(74109),l=s(95137),d=s(98094),u=s(40933),m=s(22468);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,s(81066).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function x(){var e;let t=(0,a.useRouter)(),[s,x]=(0,r.useState)(null),[p,f]=(0,r.useState)([]),[y,g]=(0,r.useState)(null),[b,N]=(0,r.useState)("{}"),[j,v]=(0,r.useState)(null),[w,k]=(0,r.useState)(!0),[S,T]=(0,r.useState)(!1),[P,E]=(0,r.useState)([]);(0,r.useEffect)(()=>{(async()=>{try{var e;let[t,s]=await Promise.all([i.h.getPMSConnection(),i.h.getAPILogs(20)]);x(t),E(s),(null===(e=t.pms_info)||void 0===e?void 0:e.endpoints)&&(f(t.pms_info.endpoints),g(t.pms_info.endpoints[0]))}catch(e){t.push("/login")}finally{k(!1)}})()},[t]);let _=async()=>{if(y){T(!0),v(null);try{let e={};try{e=JSON.parse(b)}catch(e){}let t=await i.h.testPMSEndpoint(y.path,y.method,e);v(t);let s=await i.h.getAPILogs(20);E(s)}catch(e){v({success:!1,error:e.message})}finally{T(!1)}}};return w?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsx)(o.Z,{className:"w-8 h-8 text-cyan-400 animate-spin"})}):(null==s?void 0:s.connected)?(0,n.jsxs)("div",{className:"min-h-screen",children:[(0,n.jsx)("header",{className:"border-b border-white/10 bg-black/50 backdrop-blur-xl sticky top-0 z-50",children:(0,n.jsxs)("div",{className:"max-w-7xl mx-auto px-4 h-16 flex items-center justify-between",children:[(0,n.jsxs)(c.default,{href:"/dashboard",className:"flex items-center gap-2 text-gray-400 hover:text-white transition",children:[(0,n.jsx)(l.Z,{className:"w-5 h-5"}),(0,n.jsx)("span",{children:"Dashboard"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("span",{className:"text-sm text-gray-400",children:"Connected to"}),(0,n.jsx)("span",{className:"px-3 py-1 rounded-full bg-emerald-400/20 text-emerald-400 text-sm font-medium",children:null===(e=s.pms_info)||void 0===e?void 0:e.name})]})]})}),(0,n.jsxs)("main",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"API Playground"}),(0,n.jsx)("p",{className:"text-gray-400 mb-8",children:"Test PMS API endpoints in real-time"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,n.jsxs)("div",{className:"glass-card p-4",children:[(0,n.jsx)("h2",{className:"font-semibold mb-4",children:"Endpoints"}),(0,n.jsx)("div",{className:"space-y-2",children:p.map((e,t)=>(0,n.jsxs)("button",{onClick:()=>g(e),className:"w-full text-left p-3 rounded-lg transition ".concat((null==y?void 0:y.path)===e.path?"bg-cyan-400/20 border border-cyan-400/30":"hover:bg-white/5"),children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"text-xs font-mono px-2 py-0.5 rounded ".concat("GET"===e.method?"bg-emerald-400/20 text-emerald-400":"bg-amber-400/20 text-amber-400"),children:e.method}),(0,n.jsx)("span",{className:"text-sm truncate",children:e.name})]}),(0,n.jsx)("div",{className:"text-xs text-gray-500 mt-1 font-mono truncate",children:e.path})]},t))})]}),(0,n.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,n.jsxs)("div",{className:"glass-card p-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsx)("h2",{className:"font-semibold",children:"Request"}),(0,n.jsxs)("button",{onClick:_,disabled:S||!y,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-cyan-500 to-purple-500 rounded-lg font-medium text-sm hover:opacity-90 transition disabled:opacity-50",children:[S?(0,n.jsx)(o.Z,{className:"w-4 h-4 animate-spin"}):(0,n.jsx)(d.Z,{className:"w-4 h-4"}),"Execute"]})]}),(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-400 mb-2",children:[(0,n.jsx)("span",{className:"font-mono px-2 py-0.5 rounded ".concat((null==y?void 0:y.method)==="GET"?"bg-emerald-400/20 text-emerald-400":"bg-amber-400/20 text-amber-400"),children:null==y?void 0:y.method}),(0,n.jsx)("span",{className:"font-mono",children:null==y?void 0:y.path})]})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm text-gray-400 mb-2",children:"Request Body (JSON)"}),(0,n.jsx)("textarea",{value:b,onChange:e=>N(e.target.value),className:"w-full h-32 px-4 py-3 rounded-lg bg-black/50 border border-white/10 text-white font-mono text-sm focus:outline-none focus:border-cyan-400/50 transition resize-none",placeholder:"{}"})]})]}),j&&(0,n.jsxs)("div",{className:"glass-card p-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsx)("h2",{className:"font-semibold",children:"Response"}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[j.latency_ms&&(0,n.jsxs)("span",{className:"flex items-center gap-1 text-sm text-gray-400",children:[(0,n.jsx)(u.Z,{className:"w-4 h-4"}),j.latency_ms,"ms"]}),(0,n.jsxs)("span",{className:"flex items-center gap-1 text-sm ".concat(j.success?"text-emerald-400":"text-red-400"),children:[j.success?(0,n.jsx)(m.Z,{className:"w-4 h-4"}):(0,n.jsx)(h,{className:"w-4 h-4"}),j.status||(j.success?"OK":"Error")]})]})]}),(0,n.jsx)("pre",{className:"p-4 rounded-lg bg-black/50 border border-white/10 overflow-auto max-h-96 text-sm font-mono",children:JSON.stringify(j.data||j,null,2)})]})]})]}),(0,n.jsxs)("div",{className:"mt-8 glass-card p-4",children:[(0,n.jsx)("h2",{className:"font-semibold mb-4",children:"Recent API Calls"}),(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"w-full text-sm",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"text-left text-gray-400",children:[(0,n.jsx)("th",{className:"pb-3",children:"Endpoint"}),(0,n.jsx)("th",{className:"pb-3",children:"Method"}),(0,n.jsx)("th",{className:"pb-3",children:"Status"}),(0,n.jsx)("th",{className:"pb-3",children:"Latency"}),(0,n.jsx)("th",{className:"pb-3",children:"Time"})]})}),(0,n.jsxs)("tbody",{className:"divide-y divide-white/5",children:[P.map(e=>(0,n.jsxs)("tr",{className:"text-gray-300",children:[(0,n.jsx)("td",{className:"py-2 font-mono text-xs",children:e.endpoint}),(0,n.jsx)("td",{className:"py-2",children:(0,n.jsx)("span",{className:"text-xs font-mono px-2 py-0.5 rounded ".concat("GET"===e.method?"bg-emerald-400/20 text-emerald-400":"bg-amber-400/20 text-amber-400"),children:e.method})}),(0,n.jsx)("td",{className:"py-2",children:(0,n.jsx)("span",{className:e.response_code<400?"text-emerald-400":"text-red-400",children:e.response_code})}),(0,n.jsxs)("td",{className:"py-2 text-gray-400",children:[e.latency_ms,"ms"]}),(0,n.jsx)("td",{className:"py-2 text-gray-500",children:new Date(e.created_at).toLocaleTimeString()})]},e.id)),0===P.length&&(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:5,className:"py-8 text-center text-gray-500",children:"No API calls yet. Execute an endpoint to see logs."})})]})]})})]})]})]}):(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"No PMS Connected"}),(0,n.jsx)("p",{className:"text-gray-400 mb-6",children:"Connect your PMS first to use the API Playground"}),(0,n.jsx)(c.default,{href:"/pms",className:"px-6 py-3 bg-gradient-to-r from-cyan-500 to-purple-500 rounded-lg font-semibold",children:"Connect PMS"})]})})}},92800:function(e,t,s){"use strict";s.d(t,{h:function(){return a}});let n=s(20357).env.NEXT_PUBLIC_API_URL||"/eywa/api";class r{setToken(e){this.token=e,localStorage.setItem("eywa_token",e)}clearToken(){this.token=null,localStorage.removeItem("eywa_token")}getToken(){return this.token}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s={"Content-Type":"application/json",...t.headers};this.token&&(s.Authorization="Bearer ".concat(this.token));let r=await fetch("".concat(n).concat(e),{...t,headers:s}),a=await r.json();if(!r.ok)throw Error(a.error||"API request failed");return a}async login(e,t){let s=await this.request("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})});return this.setToken(s.token),s}async register(e){let t=await this.request("/auth/register",{method:"POST",body:JSON.stringify(e)});return this.setToken(t.token),t}async me(){return this.request("/auth/me")}async getHotel(){return this.request("/hotel")}async getHotelStats(){return this.request("/hotel/stats")}async getBookings(e){let t=e?"?"+new URLSearchParams(e).toString():"";return this.request("/bookings".concat(t))}async getBookingStats(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;return this.request("/bookings/stats?period=".concat(e))}async getChannels(){return this.request("/channels")}async getPMSTypes(){return this.request("/pms/types")}async getPMSConnection(){return this.request("/pms/connection")}async connectPMS(e){return this.request("/pms/connect",{method:"POST",body:JSON.stringify(e)})}async testPMSEndpoint(e,t,s){return this.request("/pms/test",{method:"POST",body:JSON.stringify({endpoint:e,method:t,body:s})})}async getAPILogs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.request("/pms/logs?limit=".concat(e))}async getAIProviders(){return this.request("/ai/providers")}async getAIStats(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;return this.request("/ai/stats?period=".concat(e))}async getROIMetrics(){return this.request("/ai/roi")}async compareProviders(){return this.request("/ai/compare")}constructor(){this.token=null,this.token=localStorage.getItem("eywa_token")}}let a=new r}},function(e){e.O(0,[138,971,23,744],function(){return e(e.s=39700)}),_N_E=e.O()}]);