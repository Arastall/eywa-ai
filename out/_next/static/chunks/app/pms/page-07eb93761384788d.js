(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[292],{68239:function(e,t,n){Promise.resolve().then(n.bind(n,69264))},81066:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(2265),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let n=(0,r.forwardRef)((n,i)=>{let{color:a="currentColor",size:c=24,strokeWidth:l=2,absoluteStrokeWidth:u,className:d="",children:h,...m}=n;return(0,r.createElement)("svg",{ref:i,...s,width:c,height:c,stroke:a,strokeWidth:u?24*Number(l)/Number(c):l,className:["lucide","lucide-".concat(o(e)),d].join(" "),...m},[...t.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...Array.isArray(h)?h:[h]])});return n.displayName="".concat(e),n}},95137:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(81066).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},22468:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(81066).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},74109:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(81066).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},16463:function(e,t,n){"use strict";var r=n(71169);n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}})},20357:function(e,t,n){"use strict";var r,s;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(s=n.g.process)?void 0:s.env)?n.g.process:n(88081)},88081:function(e){!function(){var t={229:function(e){var t,n,r,s=e.exports={};function o(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var c=[],l=!1,u=-1;function d(){l&&r&&(l=!1,r.length?c=r.concat(c):u=-1,c.length&&h())}function h(){if(!l){var e=a(d);l=!0;for(var t=c.length;t;){for(r=c,c=[];++u<t;)r&&r[u].run();u=-1,t=c.length}r=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function f(){}s.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new m(e,t)),1!==c.length||l||a(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=f,s.addListener=f,s.once=f,s.off=f,s.removeListener=f,s.removeAllListeners=f,s.emit=f,s.prependListener=f,s.prependOnceListener=f,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},n={};function r(e){var s=n[e];if(void 0!==s)return s.exports;var o=n[e]={exports:{}},i=!0;try{t[e](o,o.exports,r),i=!1}finally{i&&delete n[e]}return o.exports}r.ab="//";var s=r(229);e.exports=s}()},69264:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var r=n(57437),s=n(2265),o=n(16463),i=n(87138),a=n(92800),c=n(74109),l=n(95137),u=n(22468);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,n(81066).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);function h(){var e,t;let n=(0,o.useRouter)(),[h,m]=(0,s.useState)([]),[f,p]=(0,s.useState)(null),[x,y]=(0,s.useState)(!0),[g,b]=(0,s.useState)(null),[v,k]=(0,s.useState)({environment:"sandbox",client_token:"",access_token:""}),[w,j]=(0,s.useState)(!1),[N,S]=(0,s.useState)("");(0,s.useEffect)(()=>{(async()=>{try{let[e,t]=await Promise.all([a.h.getPMSTypes(),a.h.getPMSConnection()]);m(e),p(t),t.connected&&b(t.pms_type)}catch(e){n.push("/login")}finally{y(!1)}})()},[n]);let T=async e=>{if(e.preventDefault(),g){S(""),j(!0);try{let e=await a.h.connectPMS({pms_type:g,environment:v.environment,client_token:v.client_token,access_token:v.access_token});p({connected:!0,...e})}catch(e){S(e.message||"Connection failed")}finally{j(!1)}}};return x?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)(c.Z,{className:"w-8 h-8 text-cyan-400 animate-spin"})}):(0,r.jsxs)("div",{className:"min-h-screen",children:[(0,r.jsx)("header",{className:"border-b border-white/10 bg-black/50 backdrop-blur-xl sticky top-0 z-50",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-4 h-16 flex items-center",children:(0,r.jsxs)(i.default,{href:"/dashboard",className:"flex items-center gap-2 text-gray-400 hover:text-white transition",children:[(0,r.jsx)(l.Z,{className:"w-5 h-5"}),(0,r.jsx)("span",{children:"Back to Dashboard"})]})})}),(0,r.jsxs)("main",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"PMS Connection"}),(0,r.jsx)("p",{className:"text-gray-400 mb-8",children:"Connect your Property Management System to sync data"}),(null==f?void 0:f.connected)&&(0,r.jsxs)("div",{className:"glass-card p-6 mb-8 border-emerald-400/30",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,r.jsx)("div",{className:"p-2 rounded-full bg-emerald-400/20",children:(0,r.jsx)(u.Z,{className:"w-5 h-5 text-emerald-400"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-emerald-400",children:"Connected"}),(0,r.jsxs)("p",{className:"text-sm text-gray-400",children:[(null===(e=f.pms_info)||void 0===e?void 0:e.name)||f.pms_type," • ",f.environment]})]})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["Last sync: ",f.last_sync_at?new Date(f.last_sync_at).toLocaleString():"Never"]})]}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Select your PMS"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:h.map(e=>(0,r.jsxs)("button",{onClick:()=>b(e.slug),className:"glass-card p-4 text-left transition hover:border-cyan-400/30 ".concat(g===e.slug?"border-cyan-400/50 bg-cyan-400/5":""),children:[(0,r.jsx)("h3",{className:"font-semibold",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-400",children:[e.endpoints.length," endpoints"]})]},e.slug))})]}),g&&(0,r.jsxs)("form",{onSubmit:T,className:"glass-card p-6 space-y-6",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold",children:["Configure ",null===(t=h.find(e=>e.slug===g))||void 0===t?void 0:t.name]}),N&&(0,r.jsxs)("div",{className:"p-3 rounded-lg bg-red-500/20 border border-red-500/30 text-red-400 text-sm flex items-center gap-2",children:[(0,r.jsx)(d,{className:"w-4 h-4"}),N]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Environment"}),(0,r.jsxs)("select",{value:v.environment,onChange:e=>k({...v,environment:e.target.value}),className:"w-full px-4 py-3 rounded-lg bg-white/5 border border-white/10 text-white focus:outline-none focus:border-cyan-400/50 transition",children:[(0,r.jsx)("option",{value:"sandbox",children:"Sandbox (Testing)"}),(0,r.jsx)("option",{value:"production",children:"Production"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Client Token"}),(0,r.jsx)("input",{type:"text",value:v.client_token,onChange:e=>k({...v,client_token:e.target.value}),className:"w-full px-4 py-3 rounded-lg bg-white/5 border border-white/10 text-white placeholder-gray-500 focus:outline-none focus:border-cyan-400/50 transition font-mono text-sm",placeholder:"Your PMS client token",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Access Token"}),(0,r.jsx)("input",{type:"text",value:v.access_token,onChange:e=>k({...v,access_token:e.target.value}),className:"w-full px-4 py-3 rounded-lg bg-white/5 border border-white/10 text-white placeholder-gray-500 focus:outline-none focus:border-cyan-400/50 transition font-mono text-sm",placeholder:"Your PMS access token",required:!0})]}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsxs)("button",{type:"submit",disabled:w,className:"flex-1 py-3 px-4 bg-gradient-to-r from-cyan-500 to-purple-500 rounded-lg font-semibold text-white hover:opacity-90 transition disabled:opacity-50 flex items-center justify-center gap-2",children:[w&&(0,r.jsx)(c.Z,{className:"w-4 h-4 animate-spin"}),w?"Connecting...":"Connect PMS"]}),(0,r.jsx)(i.default,{href:"/playground",className:"px-6 py-3 rounded-lg border border-white/20 text-gray-300 hover:bg-white/5 transition",children:"Test API →"})]})]})]})]})}},92800:function(e,t,n){"use strict";n.d(t,{h:function(){return o}});let r=n(20357).env.NEXT_PUBLIC_API_URL||"/eywa/api";class s{setToken(e){this.token=e,localStorage.setItem("eywa_token",e)}clearToken(){this.token=null,localStorage.removeItem("eywa_token")}getToken(){return this.token}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={"Content-Type":"application/json",...t.headers};this.token&&(n.Authorization="Bearer ".concat(this.token));let s=await fetch("".concat(r).concat(e),{...t,headers:n}),o=await s.json();if(!s.ok)throw Error(o.error||"API request failed");return o}async login(e,t){let n=await this.request("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})});return this.setToken(n.token),n}async register(e){let t=await this.request("/auth/register",{method:"POST",body:JSON.stringify(e)});return this.setToken(t.token),t}async me(){return this.request("/auth/me")}async getHotel(){return this.request("/hotel")}async getHotelStats(){return this.request("/hotel/stats")}async getBookings(e){let t=e?"?"+new URLSearchParams(e).toString():"";return this.request("/bookings".concat(t))}async getBookingStats(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;return this.request("/bookings/stats?period=".concat(e))}async getChannels(){return this.request("/channels")}async getPMSTypes(){return this.request("/pms/types")}async getPMSConnection(){return this.request("/pms/connection")}async connectPMS(e){return this.request("/pms/connect",{method:"POST",body:JSON.stringify(e)})}async testPMSEndpoint(e,t,n){return this.request("/pms/test",{method:"POST",body:JSON.stringify({endpoint:e,method:t,body:n})})}async getAPILogs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.request("/pms/logs?limit=".concat(e))}async getAIProviders(){return this.request("/ai/providers")}async getAIStats(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;return this.request("/ai/stats?period=".concat(e))}async getROIMetrics(){return this.request("/ai/roi")}async compareProviders(){return this.request("/ai/compare")}constructor(){this.token=null,this.token=localStorage.getItem("eywa_token")}}let o=new s}},function(e){e.O(0,[138,971,23,744],function(){return e(e.s=68239)}),_N_E=e.O()}]);